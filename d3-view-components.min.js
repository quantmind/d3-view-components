!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-dispatch"),require("d3-view"),require("d3-selection"),require("d3-ease"),require("d3-let"),require("d3-transition"),require("handlebars")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-view","d3-selection","d3-ease","d3-let","d3-transition","handlebars"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3)}(this,function(e,t,i,n,s,r,a,o){"use strict";function l(e){return e.size()?e.html():""}function d(e,t){return t.map(function(t){return"string"==typeof t&&(t={name:t}),t instanceof i.viewModel||(t=e.$new(t)),t.href||t.$set("href",t.name),t})}o=o&&o.hasOwnProperty("default")?o.default:o;var c={refresh:function(e,t){for(var i=(this.sel.attr("href")||"/").substring(1).split("/"),n=e.baseUrl||"/",s=function(e,t){return e.substring(0,t.length)===t?e.substring(t.length):e}(t||"/",n).substring(1).split("/"),r=0;r<i.length;++r)if(s[r]!==i[r])return this.sel.classed("active",!1);this.sel.classed("active",!0)}},h="collapse",u="d3-collapsing",f="collapsed",p="show",m=t.dispatch("show-start","show-end","hide-start","hide-end"),v={events:m,refresh:function(){if(!this.target){var e=this,t=this.sel,i=t.attr("aria-controls"),n=i?this.select("#"+i):null,s=n?n.node():null;if(s){s.d3Collapse=this,this.target=n,this.smallScreen=t.attr("data-small-screen")||993,this.container=this.getContainer(n);var r=n.classed(p);this.duration=400,this.transitioning=!1,t.classed(f,!r),t.attr("aria-expanded",r),this.on(t,"click."+this.uid,function(t){return e.toggle(n,t)})}}},show:function(e,t){if(!this.transitioning&&!e.classed(p)){t&&t.preventDefault();var i=this,n=this.sel,s=this.getDimension(e);e.classed(h,!1).classed(u,!0).style(s,0),n.classed(f,!1).attr("aria-expanded",!0),this.transitioning=!0;var r="scroll"+(s[0].toUpperCase()+s.slice(1)),a=e.node()[r]+"px";this.container&&this.container.show(a),m.call("show-start",void 0,e),e.transition().duration(this.duration).style(s,a).on("end",function(){i.transitioning=!1,e.classed(u,!1).classed(h,!0).classed(p,!0),e.style(s,""),m.call("show-end",void 0,e)})}},hide:function(e,t){if(!this.transitioning&&e.classed("show")){t&&t.preventDefault();var i=this,n=this.sel,s=this.getDimension(e);e.classed(u,!0).classed(h,!1).classed(p,!1),n.classed(f,!0).attr("aria-expanded",!1),this.transitioning=!0,e.style(s,""),this.container&&this.container.hide(),m.call("hide-start",void 0,e),e.transition().duration(this.duration).style(s,"0px").on("end",function(){i.transitioning=!1,e.classed(u,!1).classed(h,!0),m.call("hide-end",void 0,e)})}},toggle:function(e,t){"false"===this.sel.attr("aria-expanded")?this.show(e,t):this.hide(e,t)},getDimension:function(e){return e.classed("width")?"width":"height"},getContainer:function(e){var t=this,i=e.attr("data-container"),n=i?this.select(e.node().parentNode):null;if(n){var s=this.getSize(e);return this.select(window).on("resize."+this.uid,function(){s=t.getSize(e,s)}),{show:function(e){n.transition().duration(t.duration).style(i,e).on("end",function(){n.classed(p,!0).style(i,"")})},hide:function(){n.transition().duration(t.duration).style(i,"0px").on("end",function(){n.classed(p,!1)})}}}},getSize:function(e,t){var i=this.select("body").style("width"),n=+ +i.substring(0,i.length-2)<this.smallScreen;return void 0===t?n&&e.classed(p,!1):n!==t&&(n?this.hide(e):this.show(e)),n},destroy:function(){this.target&&this.target.on("click."+this.uid,null)}},b={refresh:function(e,t){var n=this,s=t&&t.$data?t.$data():{};i.viewProviders.require("flatpickr").then(function(t){n.fp&&n.fp.destroy(),n.sel.on("input",null),n.sel.on("change",null),e.$emit("flatpickr",s),n.fp=t(n.el,s)})},destroy:function(){this.fp&&(this.fp.destroy(),this.fp=null)}},y=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,s=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g={refresh:function(e,t){var n,s,r=this,a=i.viewProviders.require;r.sel.classed("markdown-body",!0),Promise.all([a("marked"),a("highlightjs")]).then(function(i){var a=y(i,2);n=a[0],s=a[1],r._markedOptions||(r._markedOptions=r.markedOptions(e,n,s)),r.sel.html(t?n(t,r._markedOptions):""),e.$emit("markedElement",r.el),r.selectChildren().mount()})},markedOptions:function(e,t,n){if(this._markedOptions)return self._markedOptions;var s=new t.Renderer,r=e.markedAnchorIcon||"ion-ios-grid-view-outline";return s.heading=function(e,t){var n=i.viewSlugify(e);return"<h"+t+'><a href="#'+n+'" aria-hidden="true" class="anchor" id="content-'+n+'"><i class="'+r+'"></i></a> '+e+"</h"+t+">"},{renderer:s,highlight:function(e,t){return t=n.getLanguage(t)?[t]:void 0,n.highlightAuto(e,t).value},langPrefix:"hljs "}}},w={props:{transitionDuration:300},model:{modalTitle:"d3-view modal",modalBody:"",modalDisabled:!1,modalActions:[{label:"Close"}],showModal:!1,$showModal:function(){this.showModal=!0},$hideModal:function(){this.showModal=!1},$actionClass:function(e){return e.level?"btn-"+e.level:"btn-secondary"},$action:function(e){e.$action?e.$action():this.$hideModal()},$actionLabel:function(e){return""+(e.icon?"<i class='"+e.icon+"'></i> ":"")+e.label}},render:function(e){return this.renderFromDist("d3-view-components","/modal/template.html",e)},$openModal:function(e){r.isString(e)&&(e=function(e){var t=n.select(e);return 1===t.size()?{modalTitle:l(t.select("modal-title")),modalBody:l(t.select("modal-body"))}:(i.viewWarn('Could not obtain target from selector "'+e+'"'),{})}(e));var t=n.select("#d3-view-modal");t.size()?t.model().$update(e).$showModal():n.select("body").append("modal").mount(e,function(e){return e.model.$showModal()})},$directive:{refresh:function(e,t){if(this.passes){var i=this.sel,n=i.classed("modal"),r=void 0;if(t)i.style("display","block").classed("show",!0),n&&(r=i.style("height"),i.style("top","-"+r),this.transition(i).ease(s.easeExpOut).style("top","0px"));else{var a=i.style("opacity"),o=this.transition(i);i.classed("show",!1),n?(r=i.style("height"),o.style("top","-"+r).on("end",function(){i.style("display","none")})):o.style("opacity",0),o.on("end",function(){i.style("display","none").style("opacity",a)})}}}}},$={props:{id:"sidebar",brand:"sidebar",classes:"navbar-sidebar navbar sticky-top navbar-dark bg-primary",brandUrl:"/",itemAttr:""},model:{sidebarContent:"",primaryItems:[],secondaryItems:[],sidebarToggle:'<i class="ion-android-menu"></i>',navbarItems:[],navbarTitle:"",navbarTitleUrl:"/",$collapse:function(){var e=this.$event?this.$event.currentTarget.d3Collapse:null;e&&e.hide(e.select(this.$event.currentTarget))}},render:function(e,t,i){var n=this.model;return n.primaryItems=d(n,n.primaryItems),n.secondaryItems=d(n,n.secondaryItems),n.navbarItems=d(n,n.navbarItems),n.sidebarContent=this.select(i).html(),this.renderFromDist("d3-view-components","/sidebar/template.html",e)}},k={none:null,tabs:"nav-tabs",pills:"nav-pills"},I={model:function(){return{tabItems:[],tabType:"tabs",tabTarget:"",tabClass:{reactOn:["tabType"],get:function(){return k[this.tabType]}},$selectTab:function(e){r.isObject(e)&&(e=e.id),this.tabItems.forEach(function(t){t.active=t.id===e})},$active:function(e,t){for(var i=0;i<this.tabItems.length;i++)if(this.tabItems[i].href===t&&e!==t)return"#####";return t}}},render:function(){var e=this.model,t=e.tabItems;return t.forEach(function(i,n){return r.isString(i)&&(i=e.$new({label:i}),t[n]=i),i.href||(i.href="#"),i.active=!1,i.label||(i.label="item "+(n+1)),i.id||(i.id=""+(n+1)),i}),this.renderFromDist("d3-view-components","/tabs/template.html")}};i.viewProviders.compileTemplate=o.compile,e.viewComponentsVersion="0.0.2",e.viewActive=c,e.viewCollapse=v,e.viewFlatpickr=b,e.viewMarked=g,e.viewModal=w,e.viewSidebar=$,e.viewTabs=I,Object.defineProperty(e,"__esModule",{value:!0})});