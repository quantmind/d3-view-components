!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-view"),require("d3-selection"),require("d3-ease"),require("d3-let"),require("d3-dispatch"),require("d3-transition"),require("handlebars")):"function"==typeof define&&define.amd?define(["exports","d3-view","d3-selection","d3-ease","d3-let","d3-dispatch","d3-transition","handlebars"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3)}(this,function(e,t,i,n,s,o,r,a){"use strict";function l(e){return e.size()?e.html():""}function d(e){return e.map(function(e){return"string"==typeof e&&(e={name:e,url:e}),e.url||(e.url="#"),e})}a=a&&a.hasOwnProperty("default")?a.default:a;var c={refresh:function(e,i){var n=this,s=i&&i.$data?i.$data():{};t.viewProviders.require("flatpickr").then(function(t){n.fp&&n.fp.destroy(),n.sel.on("input",null),n.sel.on("change",null),e.$emit("flatpickr",s),n.fp=t(n.el,s)})},destroy:function(){this.fp&&(this.fp.destroy(),this.fp=null)}},h=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,s=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){s=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(s)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u={refresh:function(e,i){function n(e,t){return t=o.getLanguage(t)?[t]:void 0,o.highlightAuto(e,t).value}var s,o,r=this,a=t.viewProviders.require;Promise.all([a("marked"),a("highlightjs")]).then(function(t){var a=h(t,2);s=a[0],o=a[1],s.setOptions({highlight:n,langPrefix:"hljs "}),r.sel.html(i?s(i):""),e.$emit("markedElement",r.el),r.selectChildren().mount()})}},f={props:{transitionDuration:300},model:{modalTitle:"d3-view modal",modalBody:"",modalDisabled:!1,modalActions:[{label:"Close"}],showModal:!1,$showModal:function(){this.showModal=!0},$hideModal:function(){this.showModal=!1},$actionClass:function(e){return e.level?"btn-"+e.level:"btn-secondary"},$action:function(e){e.$action?e.$action():this.$hideModal()},$actionLabel:function(e){return""+(e.icon?"<i class='"+e.icon+"'></i> ":"")+e.label}},render:function(e){return this.renderFromDist("d3-view-components","/modal/template.html",e)},$openModal:function(e){s.isString(e)&&(e=function(e){var n=i.select(e);return 1===n.size()?{modalTitle:l(n.select("modal-title")),modalBody:l(n.select("modal-body"))}:(t.viewWarn('Could not obtain target from selector "'+e+'"'),{})}(e));var n=i.select("#d3-view-modal");n.size()?n.model().$update(e).$showModal():i.select("body").append("modal").mount(e,function(e){return e.model.$showModal()})},$directive:{refresh:function(e,t){if(this.passes){var i=this.sel,s=i.classed("modal"),o=void 0;if(t)i.style("display","block").classed("show",!0),s&&(o=i.style("height"),i.style("top","-"+o),this.transition(i).ease(n.easeExpOut).style("top","0px"));else{var r=i.style("opacity"),a=this.transition(i);i.classed("show",!1),s?(o=i.style("height"),a.style("top","-"+o).on("end",function(){i.style("display","none")})):a.style("opacity",0),a.on("end",function(){i.style("display","none").style("opacity",r)})}}}}},p="collapse",m="d3-collapsing",v="collapsed",y="show",g=o.dispatch("show-start","show-end","hide-start","hide-end"),w={events:g,refresh:function(){if(!this.target){var e=this,t=this.sel,i=t.attr("aria-controls"),n=i?this.select("#"+i):null,s=n?n.node():null;if(s){s.d3Collapse=this,this.target=n,this.smallScreen=t.attr("data-small-screen")||993,this.container=this.getContainer(n);var o=n.classed(y);this.duration=400,this.transitioning=!1,t.classed(v,!o),t.attr("aria-expanded",o),this.on(t,"click."+this.uid,function(t){return e.toggle(n,t)})}}},show:function(e,t){if(!this.transitioning&&!e.classed(y)){t&&t.preventDefault();var i=this,n=this.sel,s=this.getDimension(e);e.classed(p,!1).classed(m,!0).style(s,0),n.classed(v,!1).attr("aria-expanded",!0),this.transitioning=!0;var o="scroll"+(s[0].toUpperCase()+s.slice(1)),r=e.node()[o]+"px";this.container&&this.container.show(r),g.call("show-start",void 0,e),e.transition().duration(this.duration).style(s,r).on("end",function(){i.transitioning=!1,e.classed(m,!1).classed(p,!0).classed(y,!0),e.style(s,""),g.call("show-end",void 0,e)})}},hide:function(e,t){if(!this.transitioning&&e.classed("show")){t&&t.preventDefault();var i=this,n=this.sel,s=this.getDimension(e);e.classed(m,!0).classed(p,!1).classed(y,!1),n.classed(v,!0).attr("aria-expanded",!1),this.transitioning=!0,e.style(s,""),this.container&&this.container.hide(),g.call("hide-start",void 0,e),e.transition().duration(this.duration).style(s,"0px").on("end",function(){i.transitioning=!1,e.classed(m,!1).classed(p,!0),g.call("hide-end",void 0,e)})}},toggle:function(e,t){"false"===this.sel.attr("aria-expanded")?this.show(e,t):this.hide(e,t)},getDimension:function(e){return e.classed("width")?"width":"height"},getContainer:function(e){var t=this,i=e.attr("data-container"),n=i?this.select(e.node().parentNode):null;if(n){var s=this.getSize(e);return this.select(window).on("resize."+this.uid,function(){s=t.getSize(e,s)}),{show:function(e){n.transition().duration(t.duration).style(i,e).on("end",function(){n.classed(y,!0).style(i,"")})},hide:function(){n.transition().duration(t.duration).style(i,"0px").on("end",function(){n.classed(y,!1)})}}}},getSize:function(e,t){var i=this.select("body").style("width"),n=+ +i.substring(0,i.length-2)<this.smallScreen;return void 0===t?n&&e.classed(y,!1):n!==t&&(n?this.hide(e):this.show(e)),n},destroy:function(){this.target&&this.target.on("click."+this.uid,null)}},b={props:{id:"sidebar",brand:"sidebar",classes:"navbar-sidebar navbar sticky-top navbar-dark bg-primary",brandUrl:"/",itemAttr:""},model:{sidebarContent:"",primaryItems:[],secondaryItems:[],navbarTitle:"",navbarTitleUrl:"/",sidebarToggle:'<i class="ion-android-menu"></i>',$collapse:function(){var e=this.$event?this.$event.currentTarget.d3Collapse:null;e&&e.hide(e.select(this.$event.currentTarget))}},render:function(e,t,i){return this.model.primaryItems=d(this.model.primaryItems),this.model.secondaryItems=d(this.model.secondaryItems),this.model.sidebarContent=this.select(i).html(),this.renderFromDist("d3-view-components","/sidebar/template.html",e)}};t.viewProviders.compileTemplate=a.compile,e.viewComponentsVersion="0.0.1",e.viewFlatpickr=c,e.viewMarked=u,e.viewModal=f,e.viewCollapse=w,e.viewSidebar=b,Object.defineProperty(e,"__esModule",{value:!0})});