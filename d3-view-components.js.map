{"version":3,"file":"d3-view-components.js","sources":["../active/index.js","../collapse/index.js","../flatpickr/index.js","../marked/index.js","../modal/index.js","../sidebar/index.js","../tabs/index.js","../index.js"],"sourcesContent":["export default {\n\n    refresh (model, value) {\n        const\n            href = (this.sel.attr('href') || '/').substring(1).split('/'),\n            baseUrl = model.baseUrl || '/',\n            current = r(value || '/', baseUrl).substring(1).split('/');\n\n        for (let i=0; i<href.length; ++i) {\n            if (current[i] !== href[i])\n                return this.sel.classed('active', false);\n        }\n        this.sel.classed('active', true);\n    }\n};\n\n\nfunction r (url, baseUrl) {\n    if (url.substring(0, baseUrl.length) === baseUrl) return url.substring(baseUrl.length);\n    return url;\n}\n","import {dispatch} from 'd3-dispatch';\n\nconst\n    COLLAPSE = 'collapse',\n    COLLAPSING = 'd3-collapsing',\n    COLLAPSED = 'collapsed',\n    WIDTH = 'width',\n    SHOW = 'show';\n\nexport const events = dispatch(\n    'show-start',\n    'show-end',\n    'hide-start',\n    'hide-end'\n);\n\n\nexport default {\n    events,\n\n    refresh () {\n        if (this.target) return;\n\n        var self = this,\n            sel = this.sel,\n            tid = sel.attr('aria-controls'),\n            target = tid ? this.select(`#${tid}`) : null,\n            node = target ? target.node() : null;\n\n        if (node) {\n            node.d3Collapse = this;\n            this.target = target;\n            this.smallScreen = sel.attr('data-small-screen') || 993;\n            this.container = this.getContainer(target);\n            const isOpen = target.classed(SHOW);\n            this.duration = 400;\n            this.transitioning = false;\n            sel.classed(COLLAPSED, !isOpen);\n            sel.attr('aria-expanded', isOpen);\n            this.on(sel, `click.${this.uid}`, (event) => self.toggle(target, event));\n        }\n    },\n\n    show (target, event) {\n        if (this.transitioning || target.classed(SHOW)) return;\n        if (event) event.preventDefault();\n        var self = this,\n            sel = this.sel,\n            dimension = this.getDimension(target);\n        target.classed(COLLAPSE, false).classed(COLLAPSING, true).style(dimension, 0);\n        sel.classed(COLLAPSED, false).attr('aria-expanded', true);\n        this.transitioning = true;\n        const capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1),\n            scrollSize = `scroll${capitalizedDimension}`,\n            node = target.node(),\n            size = node[scrollSize],\n            sizepx = `${size}px`;\n\n        if (this.container) this.container.show(sizepx);\n        events.call('show-start', undefined, target);\n\n        target.transition()\n            .duration(this.duration)\n            .style(dimension, sizepx)\n            .on(\"end\", () => {\n                self.transitioning = false;\n                target.classed(COLLAPSING, false).classed(COLLAPSE, true).classed(SHOW, true);\n                target.style(dimension, '');\n                events.call('show-end', undefined, target);\n            });\n    },\n\n    hide (target, event) {\n        if (this.transitioning || !target.classed('show')) return;\n        if (event) event.preventDefault();\n        var self = this,\n            sel = this.sel,\n            dimension = this.getDimension(target);\n        target.classed(COLLAPSING, true).classed(COLLAPSE, false).classed(SHOW, false);\n        sel.classed(COLLAPSED, true).attr('aria-expanded', false);\n        this.transitioning = true;\n        target.style(dimension, '');\n        if (this.container) this.container.hide();\n        events.call('hide-start', undefined, target);\n        target.transition()\n            .duration(this.duration)\n            .style(dimension, '0px')\n            .on(\"end\", () => {\n                self.transitioning = false;\n                target.classed(COLLAPSING, false).classed(COLLAPSE, true);\n                events.call('hide-end', undefined, target);\n            });\n    },\n\n    toggle (target, event) {\n        var sel = this.sel,\n            expanded = sel.attr('aria-expanded');\n        if (expanded === 'false') this.show(target, event);\n        else this.hide(target, event);\n    },\n\n    getDimension (target) {\n        return target.classed(WIDTH) ? 'width' : 'height';\n    },\n\n    getContainer (target) {\n        const self = this,\n            style = target.attr('data-container'),\n            element = style ? this.select(target.node().parentNode) : null;\n\n        if (element) {\n            let small = this.getSize(target);\n\n            this.select(window)\n                .on(`resize.${this.uid}`, () => {\n                    small = self.getSize(target, small);\n                });\n\n\n            return {\n                show (sizepx) {\n                    element\n                        .transition()\n                        .duration(self.duration)\n                        .style(style, sizepx)\n                        .on(\"end\", () => {\n                            element.classed(SHOW, true).style(style, '');\n                        });\n                },\n                hide () {\n                    element\n                        .transition()\n                        .duration(self.duration)\n                        .style(style, '0px')\n                        .on(\"end\", () => {\n                            element.classed(SHOW, false);\n                        });\n                }\n            };\n        }\n    },\n\n    getSize (target, prev) {\n        const sizepx = this.select('body').style('width'),\n            size = +sizepx.substring(0, sizepx.length-2),\n            small = +size < this.smallScreen;\n        if (prev === undefined) {\n            if (small) target.classed(SHOW, false);\n        } else if (small !== prev) {\n            if (small) this.hide(target);\n            else this.show(target);\n        }\n        return small;\n    },\n\n    destroy () {\n        if (this.target) this.target.on(`click.${this.uid}`, null);\n    }\n\n};\n","import {viewProviders} from 'd3-view';\n\n\nexport default {\n\n    refresh (model, options) {\n        var self = this,\n            opts = options && options.$data ? options.$data() : {};\n\n        viewProviders.require('flatpickr').then(flatpickr => {\n            if (self.fp) self.fp.destroy();\n            self.sel.on('input', null);\n            self.sel.on('change', null);\n            model.$emit('flatpickr', opts);\n            self.fp = flatpickr(self.el, opts);\n        });\n    },\n\n    destroy () {\n        if (this.fp) {\n            this.fp.destroy();\n            this.fp = null;\n        }\n    }\n};\n\n","import {viewProviders, viewSlugify} from 'd3-view';\n\n\nexport default {\n\n    refresh (model, doc) {\n        var self = this,\n            r = viewProviders.require,\n            marked, hl;\n\n        self.sel.classed('markdown-body', true);\n        Promise.all([r('marked'), r('highlightjs')]).then(libs => {\n            [marked, hl] = libs;\n            if (!self._markedOptions)\n                self._markedOptions = self.markedOptions(model, marked, hl);\n            self.sel.html(doc ? marked(doc, self._markedOptions) : '');\n            model.$emit('markedElement', self.el);\n            self.selectChildren().mount();\n        });\n    },\n\n    markedOptions (model, marked, hl) {\n        if (this._markedOptions) return self._markedOptions;\n        var renderer = new marked.Renderer(),\n            icon = model.markedAnchorIcon || 'ion-ios-grid-view-outline';\n\n        renderer.heading = heading;\n\n        return {\n            renderer,\n            highlight,\n            langPrefix: \"hljs \"\n        };\n\n        function heading (text, level) {\n            var id = viewSlugify(text);\n            return `<h${level}><a href=\"#${id}\" aria-hidden=\"true\" class=\"anchor\" id=\"content-${id}\"><i class=\"${icon}\"></i></a> ${text}</h${level}>`;\n        }\n\n        function highlight (code, lang) {\n            lang = hl.getLanguage(lang) ? [lang] : undefined;\n            return hl.highlightAuto(code, lang).value;\n        }\n    }\n\n};\n","import {select} from 'd3-selection';\nimport {easeExpOut} from 'd3-ease';\nimport {isString} from 'd3-let';\nimport {viewWarn} from 'd3-view';\n\n\nexport default {\n    props: {\n        transitionDuration: 300\n    },\n\n    model: {\n        modalTitle: \"d3-view modal\",\n        modalBody: '',\n        modalDisabled: false,\n        modalActions: [\n            {\n                label: \"Close\"\n            }\n        ],\n        showModal: false,\n        $showModal () {\n            this.showModal = true;\n        },\n        $hideModal () {\n            this.showModal = false;\n        },\n        $actionClass (action) {\n            return action.level ? `btn-${action.level}` : 'btn-secondary';\n        },\n        $action (action) {\n            if (action.$action) action.$action();\n            else this.$hideModal();\n        },\n        $actionLabel (action) {\n            var html = action.icon ? `<i class='${action.icon}'></i> ` : '';\n            return `${html}${action.label}`;\n        }\n    },\n\n    render: function (props) {\n        return this.renderFromDist('d3-view-components', '/modal/template.html', props);\n    },\n\n    // function for opening a modal\n    // inject this method to the root model\n    $openModal (options) {\n        if (isString(options)) options = optionsFromTarget(options);\n        var modal = select('#d3-view-modal');\n        if (!modal.size())\n            select('body').append('modal').mount(options, v => v.model.$showModal());\n        else\n            modal.model().$update(options).$showModal();\n    },\n\n    $directive: {\n        refresh (model, show) {\n            if (!this.passes) return;\n            var sel = this.sel,\n                modal = sel.classed('modal');\n            let height;\n            if (show) {\n                sel.style('display', 'block').classed('show', true);\n                if (modal) {\n                    height = sel.style('height');\n                    sel.style('top', '-' + height);\n                    this.transition(sel).ease(easeExpOut).style('top', '0px');\n                }\n            }\n            else {\n                var op = sel.style('opacity'),\n                    t = this.transition(sel);\n                sel.classed('show', false);\n                if (modal) {\n                    height = sel.style('height');\n                    t.style('top', '-' + height).on('end', function () {\n                        sel.style('display', 'none');\n                    });\n                } else\n                    t.style('opacity', 0);\n                t.on('end', function () {\n                    sel.style('display', 'none').style('opacity', op);\n                });\n            }\n        }\n    }\n};\n\n\nfunction optionsFromTarget (selector) {\n    var sel = select(selector);\n    if (sel.size() === 1) {\n        return {\n            modalTitle: textFromTarget(sel.select('modal-title')),\n            modalBody: textFromTarget(sel.select('modal-body'))\n        };\n    } else {\n        viewWarn(`Could not obtain target from selector \"${selector}\"`);\n        return {};\n    }\n}\n\nfunction textFromTarget (sel) {\n    if (sel.size()) return sel.html();\n    return '';\n}\n","import {viewModel} from 'd3-view';\n\n//\n//  Reusable Sidebar component\n//  ================================\n//\n//  Requires:\n//\n//  * navbar component\n//  * d3-collapse directive\n//  * d3-append directive\n//  * d3-active directive\n//\nexport default {\n    props: {\n        id: 'sidebar',\n        brand: 'sidebar',\n        classes: 'navbar-sidebar navbar sticky-top navbar-dark bg-primary',\n        brandUrl: '/',\n        itemAttr: ''\n    },\n\n    model: {\n        sidebarContent: '',\n        primaryItems: [],\n        secondaryItems: [],\n        sidebarToggle: '<i class=\"ion-android-menu\"></i>',\n        // navbar attributes\n        navbarItems: [],\n        navbarTitle: \"\",\n        navbarTitleUrl: \"/\",\n        // collapse action\n        $collapse () {\n            var collapse = this.$event ? this.$event.currentTarget.d3Collapse : null;\n            if (collapse)\n                collapse.hide(collapse.select(this.$event.currentTarget));\n        }\n    },\n\n    render (props, attrs, el) {\n        var model = this.model;\n        model.primaryItems = asItems(model, model.primaryItems);\n        model.secondaryItems = asItems(model, model.secondaryItems);\n        model.navbarItems = asItems(model, model.navbarItems);\n        model.sidebarContent = this.select(el).html();\n        return this.renderFromDist('d3-view-components', '/sidebar/template.html', props);\n    }\n};\n\n\nfunction asItems (model, items) {\n    return items.map(item => {\n        if (typeof item === 'string')\n            item = {\n                name: item\n            };\n        if (!(item instanceof viewModel)) item = model.$new(item);\n        if (!item.href) item.$set('href', item.name);\n        return item;\n    });\n}\n","import {isObject, isString} from 'd3-let';\n\n\nconst tabClasses = {\n    none: null,\n    tabs: 'nav-tabs',\n    pills: 'nav-pills'\n};\n\n\n//  Reusable Tabs component with Navigo\n//\n//  Requires:\n//\n//  * d3-active directive\n//\nexport default {\n\n    model () {\n        return {\n            tabItems: [],\n            tabType: 'tabs',\n            tabTarget: \"\",\n            tabClass: {\n                reactOn: ['tabType'],\n                get () {\n                    return tabClasses[this.tabType];\n                }\n            },\n            // select a tab\n            $selectTab (target) {\n                var model = this;\n                if (isObject(target)) target = target.id;\n\n                model.tabItems.forEach(item => {\n                    item.active = (item.id === target);\n                });\n            },\n            $active (href, url) {\n                let tab;\n                for (let i=0; i<this.tabItems.length; i++) {\n                    tab = this.tabItems[i].href;\n                    if (tab === url && href !== url) return '#####';\n                }\n                return url;\n            }\n        };\n    },\n\n    render () {\n        var model = this.model,\n            items = model.tabItems;\n        items.forEach((item, idx) => {\n            if (isString(item)) {\n                item = model.$new({label: item});\n                items[idx] = item;\n            }\n            if (!item.href) item.href = '#';\n            item.active = false;\n            if (!item.label) item.label = `item ${idx+1}`;\n            if (!item.id) item.id = `${idx+1}`;\n            return item;\n        });\n        // model.type = data.type;\n        return this.renderFromDist('d3-view-components', '/tabs/template.html');\n    }\n};\n","export {version as viewComponentsVersion} from './package.json';\nexport {default as viewActive} from './active/index';\nexport {default as viewCollapse} from './collapse/index';\nexport {default as viewFlatpickr} from './flatpickr/index';\nexport {default as viewMarked} from './marked/index';\nexport {default as viewModal} from './modal/index';\nexport {default as viewSidebar} from './sidebar/index';\nexport {default as viewTabs} from './tabs/index';\n\nimport 'd3-transition';\nimport Handlebars from 'handlebars';\nimport {viewProviders} from 'd3-view';\n\nviewProviders.compileTemplate = Handlebars.compile;\n"],"names":["model","value","href","sel","attr","substring","split","baseUrl","current","r","i","length","classed","url","COLLAPSE","COLLAPSING","COLLAPSED","WIDTH","SHOW","events","dispatch","target","self","tid","select","node","d3Collapse","smallScreen","container","getContainer","isOpen","duration","transitioning","on","uid","event","toggle","preventDefault","dimension","getDimension","style","capitalizedDimension","toUpperCase","slice","scrollSize","size","sizepx","show","call","undefined","transition","hide","expanded","element","parentNode","small","getSize","window","prev","options","opts","$data","require","then","fp","destroy","$emit","flatpickr","el","doc","viewProviders","marked","hl","all","libs","_markedOptions","markedOptions","html","selectChildren","mount","renderer","Renderer","icon","markedAnchorIcon","heading","text","level","id","viewSlugify","highlight","code","lang","getLanguage","highlightAuto","showModal","action","$action","$hideModal","label","props","renderFromDist","isString","optionsFromTarget","modal","append","v","$showModal","$update","passes","height","ease","easeExpOut","op","t","selector","textFromTarget","collapse","$event","currentTarget","attrs","primaryItems","asItems","secondaryItems","navbarItems","sidebarContent","items","map","item","viewModel","$new","$set","name","tabClasses","tabType","isObject","tabItems","forEach","active","tab","idx","compileTemplate","Handlebars","compile"],"mappings":";;;;;;;;;;;AAAA,YAAe;WAAA,mBAEFA,KAFE,EAEKC,KAFL,EAEY;YAEfC,OAAO,CAAC,KAAKC,GAAL,CAASC,IAAT,CAAc,MAAd,KAAyB,GAA1B,EAA+BC,SAA/B,CAAyC,CAAzC,EAA4CC,KAA5C,CAAkD,GAAlD,CADX;YAEIC,UAAUP,MAAMO,OAAN,IAAiB,GAF/B;YAGIC,UAAUC,EAAER,SAAS,GAAX,EAAgBM,OAAhB,EAAyBF,SAAzB,CAAmC,CAAnC,EAAsCC,KAAtC,CAA4C,GAA5C,CAHd;;aAKK,IAAII,IAAE,CAAX,EAAcA,IAAER,KAAKS,MAArB,EAA6B,EAAED,CAA/B,EAAkC;gBAC1BF,QAAQE,CAAR,MAAeR,KAAKQ,CAAL,CAAnB,EACI,OAAO,KAAKP,GAAL,CAASS,OAAT,CAAiB,QAAjB,EAA2B,KAA3B,CAAP;;aAEHT,GAAL,CAASS,OAAT,CAAiB,QAAjB,EAA2B,IAA3B;;CAZR;;AAiBA,SAASH,CAAT,CAAYI,GAAZ,EAAiBN,OAAjB,EAA0B;QAClBM,IAAIR,SAAJ,CAAc,CAAd,EAAiBE,QAAQI,MAAzB,MAAqCJ,OAAzC,EAAkD,OAAOM,IAAIR,SAAJ,CAAcE,QAAQI,MAAtB,CAAP;WAC3CE,GAAP;;;ACjBJ,IACIC,WAAW,UADf;IAEIC,aAAa,eAFjB;IAGIC,YAAY,WAHhB;IAIIC,QAAQ,OAJZ;IAKIC,OAAO,MALX;;AAOA,AAAO,IAAMC,SAASC,oBAClB,YADkB,EAElB,UAFkB,EAGlB,YAHkB,EAIlB,UAJkB,CAAf;;AAQP,cAAe;kBAAA;;WAAA,qBAGA;YACH,KAAKC,MAAT,EAAiB;;YAEbC,OAAO,IAAX;YACInB,MAAM,KAAKA,GADf;YAEIoB,MAAMpB,IAAIC,IAAJ,CAAS,eAAT,CAFV;YAGIiB,SAASE,MAAM,KAAKC,MAAL,OAAgBD,GAAhB,CAAN,GAA+B,IAH5C;YAIIE,OAAOJ,SAASA,OAAOI,IAAP,EAAT,GAAyB,IAJpC;;YAMIA,IAAJ,EAAU;iBACDC,UAAL,GAAkB,IAAlB;iBACKL,MAAL,GAAcA,MAAd;iBACKM,WAAL,GAAmBxB,IAAIC,IAAJ,CAAS,mBAAT,KAAiC,GAApD;iBACKwB,SAAL,GAAiB,KAAKC,YAAL,CAAkBR,MAAlB,CAAjB;gBACMS,SAAST,OAAOT,OAAP,CAAeM,IAAf,CAAf;iBACKa,QAAL,GAAgB,GAAhB;iBACKC,aAAL,GAAqB,KAArB;gBACIpB,OAAJ,CAAYI,SAAZ,EAAuB,CAACc,MAAxB;gBACI1B,IAAJ,CAAS,eAAT,EAA0B0B,MAA1B;iBACKG,EAAL,CAAQ9B,GAAR,aAAsB,KAAK+B,GAA3B,EAAkC,UAACC,KAAD;uBAAWb,KAAKc,MAAL,CAAYf,MAAZ,EAAoBc,KAApB,CAAX;aAAlC;;KAtBG;QAAA,gBA0BLd,MA1BK,EA0BGc,KA1BH,EA0BU;YACb,KAAKH,aAAL,IAAsBX,OAAOT,OAAP,CAAeM,IAAf,CAA1B,EAAgD;YAC5CiB,KAAJ,EAAWA,MAAME,cAAN;YACPf,OAAO,IAAX;YACInB,MAAM,KAAKA,GADf;YAEImC,YAAY,KAAKC,YAAL,CAAkBlB,MAAlB,CAFhB;eAGOT,OAAP,CAAeE,QAAf,EAAyB,KAAzB,EAAgCF,OAAhC,CAAwCG,UAAxC,EAAoD,IAApD,EAA0DyB,KAA1D,CAAgEF,SAAhE,EAA2E,CAA3E;YACI1B,OAAJ,CAAYI,SAAZ,EAAuB,KAAvB,EAA8BZ,IAA9B,CAAmC,eAAnC,EAAoD,IAApD;aACK4B,aAAL,GAAqB,IAArB;YACMS,uBAAuBH,UAAU,CAAV,EAAaI,WAAb,KAA6BJ,UAAUK,KAAV,CAAgB,CAAhB,CAA1D;YACIC,wBAAsBH,oBAD1B;YAEIhB,OAAOJ,OAAOI,IAAP,EAFX;YAGIoB,OAAOpB,KAAKmB,UAAL,CAHX;YAIIE,SAAYD,IAAZ,OAJJ;;YAMI,KAAKjB,SAAT,EAAoB,KAAKA,SAAL,CAAemB,IAAf,CAAoBD,MAApB;eACbE,IAAP,CAAY,YAAZ,EAA0BC,SAA1B,EAAqC5B,MAArC;;eAEO6B,UAAP,GACKnB,QADL,CACc,KAAKA,QADnB,EAEKS,KAFL,CAEWF,SAFX,EAEsBQ,MAFtB,EAGKb,EAHL,CAGQ,KAHR,EAGe,YAAM;iBACRD,aAAL,GAAqB,KAArB;mBACOpB,OAAP,CAAeG,UAAf,EAA2B,KAA3B,EAAkCH,OAAlC,CAA0CE,QAA1C,EAAoD,IAApD,EAA0DF,OAA1D,CAAkEM,IAAlE,EAAwE,IAAxE;mBACOsB,KAAP,CAAaF,SAAb,EAAwB,EAAxB;mBACOU,IAAP,CAAY,UAAZ,EAAwBC,SAAxB,EAAmC5B,MAAnC;SAPR;KA5CO;QAAA,gBAuDLA,MAvDK,EAuDGc,KAvDH,EAuDU;YACb,KAAKH,aAAL,IAAsB,CAACX,OAAOT,OAAP,CAAe,MAAf,CAA3B,EAAmD;YAC/CuB,KAAJ,EAAWA,MAAME,cAAN;YACPf,OAAO,IAAX;YACInB,MAAM,KAAKA,GADf;YAEImC,YAAY,KAAKC,YAAL,CAAkBlB,MAAlB,CAFhB;eAGOT,OAAP,CAAeG,UAAf,EAA2B,IAA3B,EAAiCH,OAAjC,CAAyCE,QAAzC,EAAmD,KAAnD,EAA0DF,OAA1D,CAAkEM,IAAlE,EAAwE,KAAxE;YACIN,OAAJ,CAAYI,SAAZ,EAAuB,IAAvB,EAA6BZ,IAA7B,CAAkC,eAAlC,EAAmD,KAAnD;aACK4B,aAAL,GAAqB,IAArB;eACOQ,KAAP,CAAaF,SAAb,EAAwB,EAAxB;YACI,KAAKV,SAAT,EAAoB,KAAKA,SAAL,CAAeuB,IAAf;eACbH,IAAP,CAAY,YAAZ,EAA0BC,SAA1B,EAAqC5B,MAArC;eACO6B,UAAP,GACKnB,QADL,CACc,KAAKA,QADnB,EAEKS,KAFL,CAEWF,SAFX,EAEsB,KAFtB,EAGKL,EAHL,CAGQ,KAHR,EAGe,YAAM;iBACRD,aAAL,GAAqB,KAArB;mBACOpB,OAAP,CAAeG,UAAf,EAA2B,KAA3B,EAAkCH,OAAlC,CAA0CE,QAA1C,EAAoD,IAApD;mBACOkC,IAAP,CAAY,UAAZ,EAAwBC,SAAxB,EAAmC5B,MAAnC;SANR;KAnEO;UAAA,kBA6EHA,MA7EG,EA6EKc,KA7EL,EA6EY;YACfhC,MAAM,KAAKA,GAAf;YACIiD,WAAWjD,IAAIC,IAAJ,CAAS,eAAT,CADf;YAEIgD,aAAa,OAAjB,EAA0B,KAAKL,IAAL,CAAU1B,MAAV,EAAkBc,KAAlB,EAA1B,KACK,KAAKgB,IAAL,CAAU9B,MAAV,EAAkBc,KAAlB;KAjFE;gBAAA,wBAoFGd,MApFH,EAoFW;eACXA,OAAOT,OAAP,CAAeK,KAAf,IAAwB,OAAxB,GAAkC,QAAzC;KArFO;gBAAA,wBAwFGI,MAxFH,EAwFW;YACZC,OAAO,IAAb;YACIkB,QAAQnB,OAAOjB,IAAP,CAAY,gBAAZ,CADZ;YAEIiD,UAAUb,QAAQ,KAAKhB,MAAL,CAAYH,OAAOI,IAAP,GAAc6B,UAA1B,CAAR,GAAgD,IAF9D;;YAIID,OAAJ,EAAa;gBACLE,QAAQ,KAAKC,OAAL,CAAanC,MAAb,CAAZ;;iBAEKG,MAAL,CAAYiC,MAAZ,EACKxB,EADL,aACkB,KAAKC,GADvB,EAC8B,YAAM;wBACpBZ,KAAKkC,OAAL,CAAanC,MAAb,EAAqBkC,KAArB,CAAR;aAFR;;mBAMO;oBAAA,gBACGT,MADH,EACW;4BAELI,UADL,GAEKnB,QAFL,CAEcT,KAAKS,QAFnB,EAGKS,KAHL,CAGWA,KAHX,EAGkBM,MAHlB,EAIKb,EAJL,CAIQ,KAJR,EAIe,YAAM;gCACLrB,OAAR,CAAgBM,IAAhB,EAAsB,IAAtB,EAA4BsB,KAA5B,CAAkCA,KAAlC,EAAyC,EAAzC;qBALR;iBAFD;oBAAA,kBAUK;4BAECU,UADL,GAEKnB,QAFL,CAEcT,KAAKS,QAFnB,EAGKS,KAHL,CAGWA,KAHX,EAGkB,KAHlB,EAIKP,EAJL,CAIQ,KAJR,EAIe,YAAM;gCACLrB,OAAR,CAAgBM,IAAhB,EAAsB,KAAtB;qBALR;;aAXR;;KAtGG;WAAA,mBA6HFG,MA7HE,EA6HMqC,IA7HN,EA6HY;YACbZ,SAAS,KAAKtB,MAAL,CAAY,MAAZ,EAAoBgB,KAApB,CAA0B,OAA1B,CAAf;YACIK,OAAO,CAACC,OAAOzC,SAAP,CAAiB,CAAjB,EAAoByC,OAAOnC,MAAP,GAAc,CAAlC,CADZ;YAEI4C,QAAQ,CAACV,IAAD,GAAQ,KAAKlB,WAFzB;YAGI+B,SAAST,SAAb,EAAwB;gBAChBM,KAAJ,EAAWlC,OAAOT,OAAP,CAAeM,IAAf,EAAqB,KAArB;SADf,MAEO,IAAIqC,UAAUG,IAAd,EAAoB;gBACnBH,KAAJ,EAAW,KAAKJ,IAAL,CAAU9B,MAAV,EAAX,KACK,KAAK0B,IAAL,CAAU1B,MAAV;;eAEFkC,KAAP;KAvIO;WAAA,qBA0IA;YACH,KAAKlC,MAAT,EAAiB,KAAKA,MAAL,CAAYY,EAAZ,YAAwB,KAAKC,GAA7B,EAAoC,IAApC;;CA3IzB;;ACdA,cAAe;WAAA,mBAEFlC,KAFE,EAEK2D,OAFL,EAEc;YACjBrC,OAAO,IAAX;YACIsC,OAAOD,WAAWA,QAAQE,KAAnB,GAA2BF,QAAQE,KAAR,EAA3B,GAA6C,EADxD;;6BAGcC,OAAd,CAAsB,WAAtB,EAAmCC,IAAnC,CAAwC,qBAAa;gBAC7CzC,KAAK0C,EAAT,EAAa1C,KAAK0C,EAAL,CAAQC,OAAR;iBACR9D,GAAL,CAAS8B,EAAT,CAAY,OAAZ,EAAqB,IAArB;iBACK9B,GAAL,CAAS8B,EAAT,CAAY,QAAZ,EAAsB,IAAtB;kBACMiC,KAAN,CAAY,WAAZ,EAAyBN,IAAzB;iBACKI,EAAL,GAAUG,UAAU7C,KAAK8C,EAAf,EAAmBR,IAAnB,CAAV;SALJ;KANO;WAAA,qBAeA;YACH,KAAKI,EAAT,EAAa;iBACJA,EAAL,CAAQC,OAAR;iBACKD,EAAL,GAAU,IAAV;;;CAlBZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,cAAe;WAAA,mBAEFhE,KAFE,EAEKqE,GAFL,EAEU;YACb/C,OAAO,IAAX;YACIb,IAAI6D,qBAAcR,OADtB;YAEIS,MAFJ;YAEYC,EAFZ;;aAIKrE,GAAL,CAASS,OAAT,CAAiB,eAAjB,EAAkC,IAAlC;gBACQ6D,GAAR,CAAY,CAAChE,EAAE,QAAF,CAAD,EAAcA,EAAE,aAAF,CAAd,CAAZ,EAA6CsD,IAA7C,CAAkD,gBAAQ;sCACvCW,IADuC;;kBAAA;cAAA;;gBAElD,CAACpD,KAAKqD,cAAV,EACIrD,KAAKqD,cAAL,GAAsBrD,KAAKsD,aAAL,CAAmB5E,KAAnB,EAA0BuE,MAA1B,EAAkCC,EAAlC,CAAtB;iBACCrE,GAAL,CAAS0E,IAAT,CAAcR,MAAME,OAAOF,GAAP,EAAY/C,KAAKqD,cAAjB,CAAN,GAAyC,EAAvD;kBACMT,KAAN,CAAY,eAAZ,EAA6B5C,KAAK8C,EAAlC;iBACKU,cAAL,GAAsBC,KAAtB;SANJ;KARO;iBAAA,yBAkBI/E,KAlBJ,EAkBWuE,MAlBX,EAkBmBC,EAlBnB,EAkBuB;YAC1B,KAAKG,cAAT,EAAyB,OAAOrD,KAAKqD,cAAZ;YACrBK,WAAW,IAAIT,OAAOU,QAAX,EAAf;YACIC,OAAOlF,MAAMmF,gBAAN,IAA0B,2BADrC;;iBAGSC,OAAT,GAAmBA,OAAnB;;eAEO;8BAAA;gCAAA;wBAGS;SAHhB;;iBAMSA,OAAT,CAAkBC,IAAlB,EAAwBC,KAAxB,EAA+B;gBACvBC,KAAKC,mBAAYH,IAAZ,CAAT;0BACYC,KAAZ,mBAA+BC,EAA/B,wDAAoFA,EAApF,oBAAqGL,IAArG,mBAAuHG,IAAvH,WAAiIC,KAAjI;;;iBAGKG,SAAT,CAAoBC,IAApB,EAA0BC,IAA1B,EAAgC;mBACrBnB,GAAGoB,WAAH,CAAeD,IAAf,IAAuB,CAACA,IAAD,CAAvB,GAAgC1C,SAAvC;mBACOuB,GAAGqB,aAAH,CAAiBH,IAAjB,EAAuBC,IAAvB,EAA6B1F,KAApC;;;CAtCZ;;ACGA,cAAe;WACJ;4BACiB;KAFb;;WAKJ;oBACS,eADT;mBAEQ,EAFR;uBAGY,KAHZ;sBAIW,CACV;mBACW;SAFD,CAJX;mBASQ,KATR;kBAAA,wBAUW;iBACL6F,SAAL,GAAiB,IAAjB;SAXD;kBAAA,wBAaW;iBACLA,SAAL,GAAiB,KAAjB;SAdD;oBAAA,wBAgBWC,MAhBX,EAgBmB;mBACXA,OAAOT,KAAP,YAAsBS,OAAOT,KAA7B,GAAuC,eAA9C;SAjBD;eAAA,mBAmBMS,MAnBN,EAmBc;gBACTA,OAAOC,OAAX,EAAoBD,OAAOC,OAAP,GAApB,KACK,KAAKC,UAAL;SArBN;oBAAA,wBAuBWF,MAvBX,EAuBmB;gBACdlB,OAAOkB,OAAOb,IAAP,mBAA2Ba,OAAOb,IAAlC,gBAAkD,EAA7D;wBACUL,IAAV,GAAiBkB,OAAOG,KAAxB;;KA9BG;;YAkCH,gBAAUC,KAAV,EAAiB;eACd,KAAKC,cAAL,CAAoB,oBAApB,EAA0C,sBAA1C,EAAkED,KAAlE,CAAP;KAnCO;;;;cAAA,sBAwCCxC,OAxCD,EAwCU;YACb0C,eAAS1C,OAAT,CAAJ,EAAuBA,UAAU2C,kBAAkB3C,OAAlB,CAAV;YACnB4C,QAAQ/E,mBAAO,gBAAP,CAAZ;YACI,CAAC+E,MAAM1D,IAAN,EAAL,EACIrB,mBAAO,MAAP,EAAegF,MAAf,CAAsB,OAAtB,EAA+BzB,KAA/B,CAAqCpB,OAArC,EAA8C;mBAAK8C,EAAEzG,KAAF,CAAQ0G,UAAR,EAAL;SAA9C,EADJ,KAGIH,MAAMvG,KAAN,GAAc2G,OAAd,CAAsBhD,OAAtB,EAA+B+C,UAA/B;KA9CG;;;gBAiDC;eAAA,mBACC1G,KADD,EACQ+C,IADR,EACc;gBACd,CAAC,KAAK6D,MAAV,EAAkB;gBACdzG,MAAM,KAAKA,GAAf;gBACIoG,QAAQpG,IAAIS,OAAJ,CAAY,OAAZ,CADZ;gBAEIiG,eAAJ;gBACI9D,IAAJ,EAAU;oBACFP,KAAJ,CAAU,SAAV,EAAqB,OAArB,EAA8B5B,OAA9B,CAAsC,MAAtC,EAA8C,IAA9C;oBACI2F,KAAJ,EAAW;6BACEpG,IAAIqC,KAAJ,CAAU,QAAV,CAAT;wBACIA,KAAJ,CAAU,KAAV,EAAiB,MAAMqE,MAAvB;yBACK3D,UAAL,CAAgB/C,GAAhB,EAAqB2G,IAArB,CAA0BC,iBAA1B,EAAsCvE,KAAtC,CAA4C,KAA5C,EAAmD,KAAnD;;aALR,MAQK;oBACGwE,KAAK7G,IAAIqC,KAAJ,CAAU,SAAV,CAAT;oBACIyE,IAAI,KAAK/D,UAAL,CAAgB/C,GAAhB,CADR;oBAEIS,OAAJ,CAAY,MAAZ,EAAoB,KAApB;oBACI2F,KAAJ,EAAW;6BACEpG,IAAIqC,KAAJ,CAAU,QAAV,CAAT;sBACEA,KAAF,CAAQ,KAAR,EAAe,MAAMqE,MAArB,EAA6B5E,EAA7B,CAAgC,KAAhC,EAAuC,YAAY;4BAC3CO,KAAJ,CAAU,SAAV,EAAqB,MAArB;qBADJ;iBAFJ,MAMIyE,EAAEzE,KAAF,CAAQ,SAAR,EAAmB,CAAnB;kBACFP,EAAF,CAAK,KAAL,EAAY,YAAY;wBAChBO,KAAJ,CAAU,SAAV,EAAqB,MAArB,EAA6BA,KAA7B,CAAmC,SAAnC,EAA8CwE,EAA9C;iBADJ;;;;CA1EhB;;AAmFA,SAASV,iBAAT,CAA4BY,QAA5B,EAAsC;QAC9B/G,MAAMqB,mBAAO0F,QAAP,CAAV;QACI/G,IAAI0C,IAAJ,OAAe,CAAnB,EAAsB;eACX;wBACSsE,eAAehH,IAAIqB,MAAJ,CAAW,aAAX,CAAf,CADT;uBAEQ2F,eAAehH,IAAIqB,MAAJ,CAAW,YAAX,CAAf;SAFf;KADJ,MAKO;oEACgD0F,QAAnD;eACO,EAAP;;;;AAIR,SAASC,cAAT,CAAyBhH,GAAzB,EAA8B;QACtBA,IAAI0C,IAAJ,EAAJ,EAAgB,OAAO1C,IAAI0E,IAAJ,EAAP;WACT,EAAP;;;ACtGJ;;;;;;;;;;;AAWA,cAAe;WACJ;YACC,SADD;eAEI,SAFJ;iBAGM,yDAHN;kBAIO,GAJP;kBAKO;KANH;;WASJ;wBACa,EADb;sBAEW,EAFX;wBAGa,EAHb;uBAIY,kCAJZ;;qBAMU,EANV;qBAOU,EAPV;wBAQa,GARb;;iBAAA,uBAUU;gBACLuC,WAAW,KAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYC,aAAZ,CAA0B5F,UAAxC,GAAqD,IAApE;gBACI0F,QAAJ,EACIA,SAASjE,IAAT,CAAciE,SAAS5F,MAAT,CAAgB,KAAK6F,MAAL,CAAYC,aAA5B,CAAd;;KAtBD;;UAAA,kBA0BHnB,KA1BG,EA0BIoB,KA1BJ,EA0BWnD,EA1BX,EA0Be;YAClBpE,QAAQ,KAAKA,KAAjB;cACMwH,YAAN,GAAqBC,QAAQzH,KAAR,EAAeA,MAAMwH,YAArB,CAArB;cACME,cAAN,GAAuBD,QAAQzH,KAAR,EAAeA,MAAM0H,cAArB,CAAvB;cACMC,WAAN,GAAoBF,QAAQzH,KAAR,EAAeA,MAAM2H,WAArB,CAApB;cACMC,cAAN,GAAuB,KAAKpG,MAAL,CAAY4C,EAAZ,EAAgBS,IAAhB,EAAvB;eACO,KAAKuB,cAAL,CAAoB,oBAApB,EAA0C,wBAA1C,EAAoED,KAApE,CAAP;;CAhCR;;AAqCA,SAASsB,OAAT,CAAkBzH,KAAlB,EAAyB6H,KAAzB,EAAgC;WACrBA,MAAMC,GAAN,CAAU,gBAAQ;YACjB,OAAOC,IAAP,KAAgB,QAApB,EACIA,OAAO;kBACGA;SADV;YAGA,EAAEA,gBAAgBC,gBAAlB,CAAJ,EAAkCD,OAAO/H,MAAMiI,IAAN,CAAWF,IAAX,CAAP;YAC9B,CAACA,KAAK7H,IAAV,EAAgB6H,KAAKG,IAAL,CAAU,MAAV,EAAkBH,KAAKI,IAAvB;eACTJ,IAAP;KAPG,CAAP;;;AChDJ,IAAMK,aAAa;UACT,IADS;UAET,UAFS;WAGR;CAHX;;;;;;;;AAaA,cAAe;SAAA,mBAEF;eACE;sBACO,EADP;qBAEM,MAFN;uBAGQ,EAHR;sBAIO;yBACG,CAAC,SAAD,CADH;mBAAA,iBAEC;2BACIA,WAAW,KAAKC,OAAhB,CAAP;;aAPL;;sBAAA,sBAWShH,MAXT,EAWiB;oBACZrB,QAAQ,IAAZ;oBACIsI,eAASjH,MAAT,CAAJ,EAAsBA,SAASA,OAAOkE,EAAhB;;sBAEhBgD,QAAN,CAAeC,OAAf,CAAuB,gBAAQ;yBACtBC,MAAL,GAAeV,KAAKxC,EAAL,KAAYlE,MAA3B;iBADJ;aAfD;mBAAA,mBAmBMnB,IAnBN,EAmBYW,GAnBZ,EAmBiB;oBACZ6H,YAAJ;qBACK,IAAIhI,IAAE,CAAX,EAAcA,IAAE,KAAK6H,QAAL,CAAc5H,MAA9B,EAAsCD,GAAtC,EAA2C;0BACjC,KAAK6H,QAAL,CAAc7H,CAAd,EAAiBR,IAAvB;wBACIwI,QAAQ7H,GAAR,IAAeX,SAASW,GAA5B,EAAiC,OAAO,OAAP;;uBAE9BA,GAAP;;SAzBR;KAHO;UAAA,oBAiCD;YACFb,QAAQ,KAAKA,KAAjB;YACI6H,QAAQ7H,MAAMuI,QADlB;cAEMC,OAAN,CAAc,UAACT,IAAD,EAAOY,GAAP,EAAe;gBACrBtC,eAAS0B,IAAT,CAAJ,EAAoB;uBACT/H,MAAMiI,IAAN,CAAW,EAAC/B,OAAO6B,IAAR,EAAX,CAAP;sBACMY,GAAN,IAAaZ,IAAb;;gBAEA,CAACA,KAAK7H,IAAV,EAAgB6H,KAAK7H,IAAL,GAAY,GAAZ;iBACXuI,MAAL,GAAc,KAAd;gBACI,CAACV,KAAK7B,KAAV,EAAiB6B,KAAK7B,KAAL,cAAqByC,MAAI,CAAzB;gBACb,CAACZ,KAAKxC,EAAV,EAAcwC,KAAKxC,EAAL,SAAaoD,MAAI,CAAjB;mBACPZ,IAAP;SATJ;;eAYO,KAAK3B,cAAL,CAAoB,oBAApB,EAA0C,qBAA1C,CAAP;;CAhDR;;ACHA9B,qBAAcsE,eAAd,GAAgCC,WAAWC,OAA3C;;;;;;;;;;;;;;;;;;;"}