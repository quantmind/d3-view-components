{"version":3,"file":"d3-view-components.js","sources":["../active/index.js","../alert/index.js","../collapse/index.js","../flatpickr/index.js","../marked/index.js","../modal/index.js","../sidebar/index.js","../tabs/index.js","../router/navigo.js","../router/index.js","../index.js"],"sourcesContent":["import {viewEvents, viewProviders} from 'd3-view';\n\n\nexport default {\n\n    //\n    // Listen for changes to the currentUrl attribute\n    mount (model) {\n        var dir = this;\n        model.$on(`currentUrl.${this.uid}`, () => dir.refresh(model));\n        return model;\n    },\n\n    refresh (model) {\n        const\n            href = this.el.href,\n            current = model.currentUrl,\n            sel = this.sel;\n\n        sel.classed('active', false);\n\n        if (!href || !current || href !== current.substring(0, href.length)) return;\n        if (sel.attr('data-active-strict') !== null && href !== current) return;\n\n        var rel = current.substring(href.length),\n            dvd = rel.substring(0, 1);\n\n        if (!rel || dvd === '/' || dvd === '#')\n            this.sel.classed('active', true);\n    },\n\n    //\n    // Remove listener for changes to the currentUrl attribute\n    destroy (model) {\n        if (model)\n            model.$off(`currentUrl.${this.uid}`);\n    }\n};\n\n//\n// Make sure the currentUrl attribute is reactive\nviewEvents.on('component-created', vm => {\n    if (!vm.parent) vm.model.currentUrl = viewProviders.location.href;\n});\n","import {isString} from 'd3-let';\n\n\nconst levels = {\n    error: 'danger',\n    warn: 'warning'\n};\n\n\n// component render function\nexport default {\n\n    props: {\n        transitionDuration: 0\n    },\n\n    model () {\n        return {\n            messages: [],\n\n            $messageClass (message) {\n                return 'alert-' + (levels[message.level] || message.level);\n            },\n\n            $close (msg) {\n                var messages = this.messages;\n\n                delete this.$$messageIds[messageKey(msg)];\n\n                for (let i=0; i<messages.length; ++i) {\n                    if (msg === messages[i]) {\n                        this.messages = messages.slice();\n                        this.messages.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n        };\n    },\n\n    render (props) {\n\n        var model = this.model,\n            messages = model.messages.splice(0),\n            messageIds = {},\n            root = model.isolatedRoot;\n\n        model.$$messageIds = messageIds;\n\n        root.$alertMessage = onMessage;\n\n        messages.forEach(onMessage);\n\n        function onMessage (data) {\n            if (!data) return;\n            if (isString(data)) data = {message: data};\n            if (data.message) {\n                if (!data.level) data.level = 'info';\n                var key = messageKey(data),\n                    msg = messageIds[key];\n                if (msg) msg.count += 1;\n                else {\n                    data.count = 1;\n                    msg = model.$new(data);\n                    messageIds[key] = msg;\n                    model.$push('messages', msg);\n                }\n            }\n        }\n\n        return this.renderFromDist('d3-view-components', '/alert/template.html', props);\n    }\n};\n\n\nfunction messageKey (msg) {\n    return `${msg.level}::${msg.message}`;\n}\n","import {dispatch} from 'd3-dispatch';\n\nconst\n    COLLAPSE = 'collapse',\n    COLLAPSING = 'd3-collapsing',\n    COLLAPSED = 'collapsed',\n    WIDTH = 'width',\n    SHOW = 'show';\n\nexport const events = dispatch(\n    'show-start',\n    'show-end',\n    'hide-start',\n    'hide-end'\n);\n\n\nexport default {\n    events,\n\n    refresh () {\n        if (this.target) return;\n\n        var self = this,\n            sel = this.sel,\n            tid = sel.attr('aria-controls'),\n            target = tid ? this.select(`#${tid}`) : null,\n            node = target ? target.node() : null;\n\n        if (node) {\n            node.d3Collapse = this;\n            this.target = target;\n            this.smallScreen = sel.attr('data-small-screen') || 993;\n            this.container = this.getContainer(target);\n            const isOpen = target.classed(SHOW);\n            this.duration = 400;\n            this.transitioning = false;\n            sel.classed(COLLAPSED, !isOpen);\n            sel.attr('aria-expanded', isOpen);\n            this.on(sel, `click.${this.uid}`, (event) => self.toggle(target, event));\n        }\n    },\n\n    show (target, event) {\n        if (this.transitioning || target.classed(SHOW)) return;\n        if (event) event.preventDefault();\n        var self = this,\n            sel = this.sel,\n            dimension = this.getDimension(target);\n        target.classed(COLLAPSE, false).classed(COLLAPSING, true).style(dimension, 0);\n        sel.classed(COLLAPSED, false).attr('aria-expanded', true);\n        this.transitioning = true;\n        const capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1),\n            scrollSize = `scroll${capitalizedDimension}`,\n            node = target.node(),\n            size = node[scrollSize],\n            sizepx = `${size}px`;\n\n        if (this.container) this.container.show(sizepx);\n        events.call('show-start', undefined, target);\n\n        target.transition()\n            .duration(this.duration)\n            .style(dimension, sizepx)\n            .on(\"end\", () => {\n                self.transitioning = false;\n                target.classed(COLLAPSING, false).classed(COLLAPSE, true).classed(SHOW, true);\n                target.style(dimension, '');\n                events.call('show-end', undefined, target);\n            });\n    },\n\n    hide (target, event) {\n        if (this.transitioning || !target.classed('show')) return;\n        if (event) event.preventDefault();\n        var self = this,\n            sel = this.sel,\n            dimension = this.getDimension(target);\n        target.classed(COLLAPSING, true).classed(COLLAPSE, false).classed(SHOW, false);\n        sel.classed(COLLAPSED, true).attr('aria-expanded', false);\n        this.transitioning = true;\n        target.style(dimension, '');\n        if (this.container) this.container.hide();\n        events.call('hide-start', undefined, target);\n        target.transition()\n            .duration(this.duration)\n            .style(dimension, '0px')\n            .on(\"end\", () => {\n                self.transitioning = false;\n                target.classed(COLLAPSING, false).classed(COLLAPSE, true);\n                events.call('hide-end', undefined, target);\n            });\n    },\n\n    toggle (target, event) {\n        var sel = this.sel,\n            expanded = sel.attr('aria-expanded');\n        if (expanded === 'false') this.show(target, event);\n        else this.hide(target, event);\n    },\n\n    getDimension (target) {\n        return target.classed(WIDTH) ? 'width' : 'height';\n    },\n\n    getContainer (target) {\n        const self = this,\n            style = target.attr('data-container'),\n            element = style ? this.select(target.node().parentNode) : null;\n\n        if (element) {\n            let small = this.getSize(target);\n\n            this.select(window)\n                .on(`resize.${this.uid}`, () => {\n                    small = self.getSize(target, small);\n                });\n\n\n            return {\n                show (sizepx) {\n                    element\n                        .transition()\n                        .duration(self.duration)\n                        .style(style, sizepx)\n                        .on(\"end\", () => {\n                            element.classed(SHOW, true).style(style, '');\n                        });\n                },\n                hide () {\n                    element\n                        .transition()\n                        .duration(self.duration)\n                        .style(style, '0px')\n                        .on(\"end\", () => {\n                            element.classed(SHOW, false);\n                        });\n                }\n            };\n        }\n    },\n\n    getSize (target, prev) {\n        const sizepx = this.select('body').style('width'),\n            size = +sizepx.substring(0, sizepx.length-2),\n            small = +size < this.smallScreen;\n        if (prev === undefined) {\n            if (small) target.classed(SHOW, false);\n        } else if (small !== prev) {\n            if (small) this.hide(target);\n            else this.show(target);\n        }\n        return small;\n    },\n\n    destroy () {\n        if (this.target) this.target.on(`click.${this.uid}`, null);\n    }\n\n};\n","import {viewProviders} from 'd3-view';\n\n\nexport default {\n\n    refresh (model, options) {\n        var self = this,\n            opts = options && options.$data ? options.$data() : {};\n\n        viewProviders.require('flatpickr').then(flatpickr => {\n            if (self.fp) self.fp.destroy();\n            self.sel.on('input', null);\n            self.sel.on('change', null);\n            model.$emit('flatpickr', opts);\n            self.fp = flatpickr(self.el, opts);\n        });\n    },\n\n    destroy () {\n        if (this.fp) {\n            this.fp.destroy();\n            this.fp = null;\n        }\n    }\n};\n\n","import {viewProviders, viewSlugify} from 'd3-view';\n\n\nexport default {\n\n    refresh (model, doc) {\n        var self = this,\n            r = viewProviders.require,\n            marked, hl;\n\n        self.sel.classed('markdown-body', true);\n        Promise.all([r('marked'), r('highlightjs')]).then(libs => {\n            [marked, hl] = libs;\n            if (!self._markedOptions)\n                self._markedOptions = self.markedOptions(model, marked, hl);\n            self.sel.html(doc ? marked(doc, self._markedOptions) : '');\n            model.$emit('markedElement', self.el);\n            self.selectChildren().mount();\n        });\n    },\n\n    markedOptions (model, marked, hl) {\n        if (this._markedOptions) return self._markedOptions;\n        var renderer = new marked.Renderer(),\n            icon = model.markedAnchorIcon || 'ion-ios-grid-view-outline';\n\n        renderer.heading = heading;\n\n        return {\n            renderer,\n            highlight,\n            langPrefix: \"hljs \"\n        };\n\n        function heading (text, level) {\n            var id = viewSlugify(text);\n            return `<h${level}><a href=\"#${id}\" aria-hidden=\"true\" class=\"anchor\" id=\"content-${id}\"><i class=\"${icon}\"></i></a> ${text}</h${level}>`;\n        }\n\n        function highlight (code, lang) {\n            lang = hl.getLanguage(lang) ? [lang] : undefined;\n            return hl.highlightAuto(code, lang).value;\n        }\n    }\n\n};\n","import {easeExpOut} from 'd3-ease';\nimport {isString} from 'd3-let';\nimport {viewWarn, viewBase} from 'd3-view';\n\n\nconst select = viewBase.select;\n\n\nconst modalComponent = {\n    props: {\n        transitionDuration: 300\n    },\n\n    model: {\n        modalTitle: \"d3-view modal\",\n        modalBody: '',\n        modalDisabled: false,\n        modalActions: [\n            {\n                label: \"Close\"\n            }\n        ],\n        showModal: false,\n        $showModal () {\n            this.showModal = true;\n        },\n        $hideModal () {\n            this.showModal = false;\n        },\n        $actionClass (action) {\n            return action.level ? `btn-${action.level}` : 'btn-secondary';\n        },\n        $action (action) {\n            if (action.$action) action.$action();\n            else this.$hideModal();\n        },\n        $actionLabel (action) {\n            var html = action.icon ? `<i class='${action.icon}'></i> ` : '';\n            return `${html}${action.label}`;\n        }\n    },\n\n    render: function (props) {\n        return this.renderFromDist('d3-view-components', '/modal/template.html', props);\n    }\n\n};\n\n\nconst modalDirective = {\n    refresh (model, show) {\n        if (!this.passes) return;\n        var sel = this.sel,\n            modal = sel.classed('modal');\n        let height;\n        if (show) {\n            sel.style('display', 'block').classed('show', true);\n            if (modal) {\n                height = sel.style('height');\n                sel.style('top', '-' + height);\n                this.transition(sel).ease(easeExpOut).style('top', '0px');\n            }\n        }\n        else {\n            var op = sel.style('opacity'),\n                t = this.transition(sel);\n            sel.classed('show', false);\n            if (modal) {\n                height = sel.style('height');\n                t.style('top', '-' + height).on('end', function () {\n                    sel.style('display', 'none');\n                });\n            } else\n                t.style('opacity', 0);\n            t.on('end', function () {\n                sel.style('display', 'none').style('opacity', op);\n            });\n        }\n    }\n};\n\n\nexport default {\n    modalComponent,\n    modalDirective,\n    modalOpen,\n\n    install (vm) {\n        vm.addComponent('modal', modalComponent);\n        vm.addDirective('modal', modalDirective);\n        vm.model.$openModal = modalOpen;\n    }\n};\n\n\n// function for opening a modal\n// inject this method to the root model\nfunction modalOpen (options) {\n    if (isString(options)) options = optionsFromTarget(options);\n    var modal = select('#d3-view-modal');\n    if (!modal.size())\n        select('body').append('modal').mount(options, vm => vm.model.$showModal());\n    else\n        modal.model().$update(options).$showModal();\n}\n\n\nfunction optionsFromTarget (selector) {\n    var sel = select(selector);\n    if (sel.size() === 1) {\n        return {\n            modalTitle: textFromTarget(sel.select('modal-title')),\n            modalBody: textFromTarget(sel.select('modal-body'))\n        };\n    } else {\n        viewWarn(`Could not obtain target from selector \"${selector}\"`);\n        return {};\n    }\n}\n\nfunction textFromTarget (sel) {\n    if (sel.size()) return sel.html();\n    return '';\n}\n","import {viewModel} from 'd3-view';\n\n//\n//  Reusable Sidebar component\n//  ================================\n//\n//  Requires:\n//\n//  * collapse directive\n//  * active directive (Optional)\n//\nexport default {\n    props: {\n        id: 'sidebar',\n        brand: 'sidebar',\n        classes: 'navbar-sidebar navbar sticky-top navbar-dark bg-primary',\n        brandUrl: '/',\n        itemAttr: ''\n    },\n\n    model: {\n        primaryItems: [],\n        secondaryItems: [],\n        sidebarToggle: '<i class=\"ion-android-menu\"></i>',\n        // navbar attributes\n        navbarItems: [],\n        navbarTitle: \"\",\n        navbarTitleUrl: \"/\",\n        // collapse action\n        $collapse () {\n            var collapse = this.$event ? this.$event.currentTarget.d3Collapse : null;\n            if (collapse)\n                collapse.hide(collapse.select(this.$event.currentTarget));\n        }\n    },\n\n    render (props, attrs, el) {\n        var model = this.model;\n        asItems(model, model.primaryItems);\n        asItems(model, model.secondaryItems);\n        asItems(model, model.navbarItems);\n        props.sidebarContent = this.select(el).html();\n        return this.renderFromDist('d3-view-components', '/sidebar/template.html', props);\n    }\n};\n\n\nfunction asItems (model, items) {\n    let item;\n    for (let i=0; i<items.length; ++i) {\n        item = items[i];\n        if (typeof item === 'string')\n            item = {\n                name: item\n            };\n        if (!(item instanceof viewModel)) item = model.$new(item);\n        if (!item.href) item.$set('href', item.name);\n        items[i] = item;\n    }\n}\n","import {isObject, isString} from 'd3-let';\nimport {viewSlugify} from 'd3-view';\n\n\nconst tabClasses = {\n    none: null,\n    tabs: 'nav-tabs',\n    pills: 'nav-pills'\n};\n\n\n//  Reusable Tabs component with Navigo\n//\n//  Requires:\n//\n//  * d3-active directive\n//\nexport default {\n    props: {\n        tabTransitionDuration: 250\n    },\n\n    model () {\n        return {\n            tabItems: [],\n            tabType: 'tabs',\n            tabTarget: \"\",\n            tabClass: {\n                reactOn: ['tabType'],\n                get () {\n                    return tabClasses[this.tabType];\n                }\n            },\n            // select a tab\n            $selectTab (tab) {\n                if (isObject(tab)) tab = tab.href;\n\n                var target = this.targets.get(tab),\n                    event = this.$event;\n\n                if (target) {\n                    // when local targets are available rather than remote ones\n                    this.tabTarget = target;\n                    if (event && event.currentTarget) this.currentUrl = event.currentTarget.href;\n                } else {\n                    // use router if available\n                    var router = this.$$view.root.router;\n                    if (router && event && event.currentTarget) {\n                        event.preventDefault();\n                        router.navigate(event.currentTarget.href, true);\n                    }\n                }\n                this.tabItems.forEach(item => {\n                    item.active = (item.href === tab);\n                });\n            }\n        };\n    },\n\n    render (props, attrs, el) {\n        var self = this,\n            model = this.model,\n            items = model.tabItems;\n\n        model.targets = new Map;\n\n        items.forEach((item, idx) => {\n            if (isString(item)) {\n                item = model.$new({label: item});\n                items[idx] = item;\n            }\n            if (!item.label) item.label = `item ${idx+1}`;\n            if (!item.id) item.id = viewSlugify(item.label);\n            if (!item.href) item.href = `#${item.id}`;\n            //\n            return item;\n        });\n\n        //\n        //  cache existing targets if avalable\n        this.selectChildren(el).each(function (idx) {\n            var sel = self.select(this),\n                id = sel.attr('id') || (items[idx] ? items[idx].id : null);\n            if (id) model.targets.set(`#${id}`, sel.html());\n        });\n\n        // model.type = data.type;\n        return this.renderFromDist('d3-view-components', '/tabs/template.html', props);\n    },\n\n    mounted () {\n\n    }\n};\n","function isPushStateAvailable() {\n  return !!(\n    typeof window !== 'undefined' &&\n    window.history &&\n    window.history.pushState\n  );\n}\n\nfunction Navigo(r, useHash, hash) {\n  this.root = null;\n  this._routes = [];\n  this._useHash = useHash;\n  this._hash = typeof hash === 'undefined' ? '#' : hash;\n  this._paused = false;\n  this._destroyed = false;\n  this._lastRouteResolved = null;\n  this._notFoundHandler = null;\n  this._defaultHandler = null;\n  this._usePushState = !useHash && isPushStateAvailable();\n  this._onLocationChange = this._onLocationChange.bind(this);\n  this._genericHooks = null;\n  this._historyAPIUpdateMethod = 'pushState';\n\n  if (r) {\n    this.root = useHash ? r.replace(/\\/$/, '/' + this._hash) : r.replace(/\\/$/, '');\n  } else if (useHash) {\n    this.root = this._cLoc().split(this._hash)[0].replace(/\\/$/, '/' + this._hash);\n  }\n\n  this._listen();\n  this.updatePageLinks();\n}\n\nfunction clean(s) {\n  if (s instanceof RegExp) return s;\n  return s.replace(/\\/+$/, '').replace(/^\\/+/, '^/');\n}\n\nfunction regExpResultToParams(match, names) {\n  if (names.length === 0) return null;\n  if (!match) return null;\n  return match\n    .slice(1, match.length)\n    .reduce((params, value, index) => {\n      if (params === null) params = {};\n      params[names[index]] = decodeURIComponent(value);\n      return params;\n    }, null);\n}\n\nfunction replaceDynamicURLParts(route) {\n  var paramNames = [], regexp;\n\n  if (route instanceof RegExp) {\n    regexp = route;\n  } else {\n    regexp = new RegExp(\n      route.replace(Navigo.PARAMETER_REGEXP, function (full, dots, name) {\n        paramNames.push(name);\n        return Navigo.REPLACE_VARIABLE_REGEXP;\n      })\n      .replace(Navigo.WILDCARD_REGEXP, Navigo.REPLACE_WILDCARD) + Navigo.FOLLOWED_BY_SLASH_REGEXP\n    , Navigo.MATCH_REGEXP_FLAGS);\n  }\n  return { regexp, paramNames };\n}\n\nfunction getUrlDepth(url) {\n  return url.replace(/\\/$/, '').split('/').length;\n}\n\nfunction compareUrlDepth(urlA, urlB) {\n  return getUrlDepth(urlB) - getUrlDepth(urlA);\n}\n\nfunction findMatchedRoutes(url, routes = []) {\n  return routes\n    .map(route => {\n      var { regexp, paramNames } = replaceDynamicURLParts(clean(route.route));\n      var match = url.replace(/^\\/+/, '/').match(regexp);\n      var params = regExpResultToParams(match, paramNames);\n\n      return match ? { match, route, params } : false;\n    })\n    .filter(m => m);\n}\n\nfunction match(url, routes) {\n  return findMatchedRoutes(url, routes)[0] || false;\n}\n\nfunction root(url, routes) {\n  var matched = routes.map(\n    route => route.route === '' || route.route === '*' ? url : url.split(new RegExp(route.route + '($|\\/)'))[0]\n  );\n  var fallbackURL = clean(url);\n\n  if (matched.length > 1) {\n    return matched.reduce((result, url) => {\n      if (result.length > url.length) result = url;\n      return result;\n    }, matched[0]);\n  } else if (matched.length === 1) {\n    return matched[0];\n  }\n  return fallbackURL;\n}\n\nfunction isHashChangeAPIAvailable() {\n  return !!(\n    typeof window !== 'undefined' &&\n    'onhashchange' in window\n  );\n}\n\nfunction extractGETParameters(url) {\n  return url.split(/\\?(.*)?$/).slice(1).join('');\n}\n\nfunction getOnlyURL(url, useHash, hash) {\n  var onlyURL = url, split;\n  var cleanGETParam = str => str.split(/\\?(.*)?$/)[0];\n\n  if (typeof hash === 'undefined') {\n    // To preserve BC\n    hash = '#';\n  }\n\n  if (isPushStateAvailable() && !useHash) {\n    onlyURL = cleanGETParam(url).split(hash)[0];\n  } else {\n    split = url.split(hash);\n    onlyURL = split.length > 1 ? cleanGETParam(split[1]) : cleanGETParam(split[0]);\n  }\n\n  return onlyURL;\n}\n\nfunction manageHooks(handler, hooks, params) {\n  if (hooks && typeof hooks === 'object') {\n    if (hooks.before) {\n      hooks.before((shouldRoute = true) => {\n        if (!shouldRoute) return;\n        handler();\n        hooks.after && hooks.after(params);\n      }, params);\n    } else if (hooks.after) {\n      handler();\n      hooks.after && hooks.after(params);\n    }\n    return;\n  }\n  handler();\n};\n\nfunction isHashedRoot(url, useHash, hash) {\n  if (isPushStateAvailable() && !useHash) {\n    return false;\n  }\n\n  if (!url.match(hash)) {\n    return false;\n  }\n\n  let split = url.split(hash);\n\n  if (split.length < 2 || split[1] === '') {\n    return true;\n  }\n\n  return false;\n};\n\nNavigo.prototype = {\n  helpers: {\n    match,\n    root,\n    clean,\n    getOnlyURL\n  },\n  navigate: function (path, absolute) {\n    var to;\n\n    path = path || '';\n    if (this._usePushState) {\n      to = (!absolute ? this._getRoot() + '/' : '') + path.replace(/^\\/+/, '/');\n      to = to.replace(/([^:])(\\/{2,})/g, '$1/');\n      history[this._historyAPIUpdateMethod]({}, '', to);\n      this.resolve();\n    } else if (typeof window !== 'undefined') {\n      path = path.replace(new RegExp('^' + this._hash), '');\n      window.location.href =\n        window.location.href\n          .replace(/#$/, '')\n          .replace(new RegExp(this._hash + '.*$'), '') + this._hash + path;\n    }\n    return this;\n  },\n  on: function (...args) {\n    if (typeof args[0] === 'function') {\n      this._defaultHandler = { handler: args[0], hooks: args[1] };\n    } else if (args.length >= 2) {\n      if (args[0] === '/') {\n        let func = args[1];\n\n        if (typeof args[1] === 'object') {\n          func = args[1].uses;\n        }\n\n        this._defaultHandler = { handler: func, hooks: args[2] };\n      } else {\n        this._add(args[0], args[1], args[2]);\n      }\n    } else if (typeof args[0] === 'object') {\n      let orderedRoutes = Object.keys(args[0]).sort(compareUrlDepth);\n\n      orderedRoutes.forEach(route => {\n        this.on(route, args[0][route]);\n      });\n    }\n    return this;\n  },\n  off: function (handler) {\n    if (this._defaultHandler !== null && handler === this._defaultHandler.handler) {\n      this._defaultHandler = null;\n    } else if (this._notFoundHandler !== null && handler === this._notFoundHandler.handler) {\n      this._notFoundHandler = null;\n    }\n    this._routes = this._routes.reduce((result, r) => {\n      if (r.handler !== handler) result.push(r);\n      return result;\n    }, []);\n    return this;\n  },\n  notFound: function (handler, hooks) {\n    this._notFoundHandler = { handler, hooks: hooks };\n    return this;\n  },\n  resolve: function (current) {\n    var handler, m;\n    var url = (current || this._cLoc()).replace(this._getRoot(), '');\n\n    if (this._useHash) {\n      url = url.replace(new RegExp('^\\/' + this._hash), '/');\n    }\n\n    let GETParameters = extractGETParameters(current || this._cLoc());\n    let onlyURL = getOnlyURL(url, this._useHash, this._hash);\n\n    if (this._paused) return false;\n\n    if (\n        this._lastRouteResolved &&\n        onlyURL === this._lastRouteResolved.url &&\n        GETParameters === this._lastRouteResolved.query\n    ) {\n      if (this._lastRouteResolved.hooks && this._lastRouteResolved.hooks.already) {\n        this._lastRouteResolved.hooks.already(this._lastRouteResolved.params);\n      }\n      return false;\n    }\n\n    m = match(onlyURL, this._routes);\n\n    if (m) {\n      this._callLeave();\n      this._lastRouteResolved = {\n        url: onlyURL,\n        query: GETParameters,\n        hooks: m.route.hooks,\n        params: m.params,\n        name: m.route.name\n      };\n      handler = m.route.handler;\n      manageHooks(() => {\n        manageHooks(() => {\n          m.route.route instanceof RegExp ?\n            handler(...(m.match.slice(1, m.match.length))) :\n            handler(m.params, GETParameters);\n        }, m.route.hooks, m.params, this._genericHooks);\n      }, this._genericHooks, m.params);\n      return m;\n    } else if (this._defaultHandler && (\n        onlyURL === '' ||\n        onlyURL === '/' ||\n        onlyURL === this._hash ||\n        isHashedRoot(onlyURL, this._useHash, this._hash)\n    )) {\n      manageHooks(() => {\n        manageHooks(() => {\n          this._callLeave();\n          this._lastRouteResolved = { url: onlyURL, query: GETParameters, hooks: this._defaultHandler.hooks };\n          this._defaultHandler.handler(GETParameters);\n        }, this._defaultHandler.hooks);\n      }, this._genericHooks);\n      return true;\n    } else if (this._notFoundHandler) {\n      manageHooks(() => {\n        manageHooks(() => {\n          this._callLeave();\n          this._lastRouteResolved = { url: onlyURL, query: GETParameters, hooks: this._notFoundHandler.hooks };\n          this._notFoundHandler.handler(GETParameters);\n        }, this._notFoundHandler.hooks);\n      }, this._genericHooks);\n    }\n    return false;\n  },\n  destroy: function () {\n    this._routes = [];\n    this._destroyed = true;\n    clearTimeout(this._listeningInterval);\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('popstate', this._onLocationChange);\n      window.removeEventListener('hashchange', this._onLocationChange);\n    }\n  },\n  updatePageLinks: function () {\n    var self = this;\n\n    if (typeof document === 'undefined') return;\n\n    this._findLinks().forEach(link => {\n      if (!link.hasListenerAttached) {\n        link.addEventListener('click', function (e) {\n          var location = self.getLinkPath(link);\n\n          if (!self._destroyed) {\n            e.preventDefault();\n            self.navigate(location.replace(/\\/+$/, '').replace(/^\\/+/, '/'));\n          }\n        });\n        link.hasListenerAttached = true;\n      }\n    });\n  },\n  generate: function (name, data = {}) {\n    var result = this._routes.reduce((result, route) => {\n      var key;\n\n      if (route.name === name) {\n        result = route.route;\n        for (key in data) {\n          result = result.toString().replace(':' + key, data[key]);\n        }\n      }\n      return result;\n    }, '');\n\n    return this._useHash ? this._hash + result : result;\n  },\n  link: function (path) {\n    return this._getRoot() + path;\n  },\n  pause: function (status = true) {\n    this._paused = status;\n    if (status) {\n      this._historyAPIUpdateMethod = 'replaceState';\n    } else {\n      this._historyAPIUpdateMethod = 'pushState';\n    }\n  },\n  resume: function () {\n    this.pause(false);\n  },\n  historyAPIUpdateMethod: function (value) {\n    if (typeof value === 'undefined') return this._historyAPIUpdateMethod;\n    this._historyAPIUpdateMethod = value;\n    return value;\n  },\n  disableIfAPINotAvailable: function () {\n    if (!isPushStateAvailable()) {\n      this.destroy();\n    }\n  },\n  lastRouteResolved() {\n    return this._lastRouteResolved;\n  },\n  getLinkPath(link) {\n    return link.getAttribute('href');\n  },\n  hooks(hooks) {\n    this._genericHooks = hooks;\n  },\n  _add: function (route, handler = null, hooks = null) {\n    if (typeof route === 'string') {\n      route = encodeURI(route);\n    }\n    if (typeof handler === 'object') {\n      this._routes.push({\n        route,\n        handler: handler.uses,\n        name: handler.as,\n        hooks: hooks || handler.hooks\n      });\n    } else {\n      this._routes.push({ route, handler, hooks: hooks });\n    }\n    return this._add;\n  },\n  _getRoot: function () {\n    if (this.root !== null) return this.root;\n    this.root = root(this._cLoc().split('?')[0], this._routes);\n    return this.root;\n  },\n  _listen: function () {\n    if (this._usePushState) {\n      window.addEventListener('popstate', this._onLocationChange);\n    } else if (isHashChangeAPIAvailable()) {\n      window.addEventListener('hashchange', this._onLocationChange);\n    } else {\n      let cached = this._cLoc(), current, check;\n\n      check = () => {\n        current = this._cLoc();\n        if (cached !== current) {\n          cached = current;\n          this.resolve();\n        }\n        this._listeningInterval = setTimeout(check, 200);\n      };\n      check();\n    }\n  },\n  _cLoc: function () {\n    if (typeof window !== 'undefined') {\n      if (typeof window.__NAVIGO_WINDOW_LOCATION_MOCK__ !== 'undefined') {\n        return window.__NAVIGO_WINDOW_LOCATION_MOCK__;\n      }\n      return clean(window.location.href);\n    }\n    return '';\n  },\n  _findLinks: function () {\n    return [].slice.call(document.querySelectorAll('[data-navigo]'));\n  },\n  _onLocationChange: function () {\n    this.resolve();\n  },\n  _callLeave() {\n    if (this._lastRouteResolved && this._lastRouteResolved.hooks && this._lastRouteResolved.hooks.leave) {\n      this._lastRouteResolved.hooks.leave();\n    }\n  }\n};\n\nNavigo.PARAMETER_REGEXP = /([:*])(\\w+)/g;\nNavigo.WILDCARD_REGEXP = /\\*/g;\nNavigo.REPLACE_VARIABLE_REGEXP = '([^\\/]+)';\nNavigo.REPLACE_WILDCARD = '(?:.*)';\nNavigo.FOLLOWED_BY_SLASH_REGEXP = '(?:\\/$|$)';\nNavigo.MATCH_REGEXP_FLAGS = '';\n\nexport default Navigo;\n","import {dispatch} from 'd3-dispatch';\nimport {viewEvents, viewDebounce} from 'd3-view';\n\nimport Navigo from './navigo';\n\n\nexport default function (vm, config) {\n    config = config || {};\n    var events = dispatch('before', 'after', 'leave'),\n        baseUrl = vm.providers.resolve(config.basePath || '/'),\n        router = new Navigo(baseUrl);\n\n    vm.router = router;\n    vm.routerEvents = events;\n    vm.updatePageLinks = viewDebounce(function () {\n        vm.logDebug('update page links');\n        vm.router.updatePageLinks();\n    });\n    if (config.routes) config.routes(vm);\n\n    router.hooks({\n        before (done, params) {\n            events.call('before', undefined, vm, params);\n            done();\n        },\n        after (params) {\n            // var url = router.lastRouteResolved().url;\n            var url = vm.providers.location.href;\n            vm.model.$set('currentUrl', url);\n            events.call('after', undefined, vm, params);\n        },\n        leave (params) {\n            events.call('leave', undefined, vm, params);\n        }\n    });\n\n    viewEvents.on('component-mounted', function (cm) {\n        var root = cm.root;\n        if (root === vm) {\n            vm.updatePageLinks();\n            if (cm === vm && config.autoResolve !== false) {\n                vm.logDebug('Resolve route with router');\n                vm.router.resolve();\n            }\n        }\n    });\n\n    return vm;\n}\n","export {version as viewComponentsVersion} from './package.json';\nexport {default as viewActive} from './active/index';\nexport {default as viewAlert} from './alert/index';\nexport {default as viewCollapse} from './collapse/index';\nexport {default as viewFlatpickr} from './flatpickr/index';\nexport {default as viewMarked} from './marked/index';\nexport {default as viewModal} from './modal/index';\nexport {default as viewSidebar} from './sidebar/index';\nexport {default as viewTabs} from './tabs/index';\nexport {default as viewRouter} from './router/index';\n\nimport 'd3-transition';\nimport Handlebars from 'handlebars';\nimport {viewProviders} from 'd3-view';\n\nviewProviders.compileTemplate = Handlebars.compile;\n"],"names":["model","dir","$on","uid","refresh","href","el","current","currentUrl","sel","classed","substring","length","attr","rel","dvd","$off","viewEvents","on","vm","parent","viewProviders","location","levels","message","level","msg","messages","$$messageIds","messageKey","i","slice","splice","props","messageIds","root","isolatedRoot","$alertMessage","onMessage","forEach","data","isString","key","count","$new","$push","renderFromDist","COLLAPSE","COLLAPSING","COLLAPSED","WIDTH","SHOW","events","dispatch","target","self","tid","select","node","d3Collapse","smallScreen","container","getContainer","isOpen","duration","transitioning","event","toggle","preventDefault","dimension","getDimension","style","capitalizedDimension","toUpperCase","scrollSize","size","sizepx","show","call","undefined","transition","hide","expanded","element","parentNode","small","getSize","window","prev","options","opts","$data","require","then","fp","destroy","$emit","flatpickr","doc","r","marked","hl","all","libs","_markedOptions","markedOptions","html","selectChildren","mount","renderer","Renderer","icon","markedAnchorIcon","heading","text","id","viewSlugify","highlight","code","lang","getLanguage","highlightAuto","value","viewBase","modalComponent","showModal","action","$action","$hideModal","label","modalDirective","passes","modal","height","ease","easeExpOut","op","t","addComponent","addDirective","$openModal","modalOpen","optionsFromTarget","append","$showModal","$update","selector","textFromTarget","collapse","$event","currentTarget","attrs","primaryItems","secondaryItems","navbarItems","sidebarContent","asItems","items","item","viewModel","$set","name","tabClasses","tabType","tab","isObject","targets","get","tabTarget","router","$$view","navigate","tabItems","active","Map","idx","each","set","isPushStateAvailable","history","pushState","Navigo","useHash","hash","_routes","_useHash","_hash","_paused","_destroyed","_lastRouteResolved","_notFoundHandler","_defaultHandler","_usePushState","_onLocationChange","bind","_genericHooks","_historyAPIUpdateMethod","replace","_cLoc","split","_listen","updatePageLinks","clean","s","RegExp","regExpResultToParams","match","names","reduce","params","index","decodeURIComponent","replaceDynamicURLParts","route","paramNames","regexp","PARAMETER_REGEXP","full","dots","push","REPLACE_VARIABLE_REGEXP","WILDCARD_REGEXP","REPLACE_WILDCARD","FOLLOWED_BY_SLASH_REGEXP","MATCH_REGEXP_FLAGS","getUrlDepth","url","compareUrlDepth","urlA","urlB","findMatchedRoutes","routes","map","filter","m","matched","fallbackURL","result","isHashChangeAPIAvailable","extractGETParameters","join","getOnlyURL","onlyURL","cleanGETParam","str","manageHooks","handler","hooks","before","shouldRoute","after","isHashedRoot","prototype","path","absolute","to","_getRoot","resolve","args","func","babelHelpers.typeof","uses","_add","orderedRoutes","Object","keys","sort","GETParameters","query","already","_callLeave","_listeningInterval","removeEventListener","document","_findLinks","link","hasListenerAttached","addEventListener","e","getLinkPath","toString","status","pause","getAttribute","encodeURI","as","cached","check","setTimeout","__NAVIGO_WINDOW_LOCATION_MOCK__","querySelectorAll","leave","config","baseUrl","providers","basePath","routerEvents","viewDebounce","logDebug","done","cm","autoResolve","compileTemplate","Handlebars","compile"],"mappings":"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"}